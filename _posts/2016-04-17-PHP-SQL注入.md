---
layout: post
title: "PHP SQL注入"
description: "最全防止SQL注入方法"
category: 
tags: [PHP MySQL]
---
{% include JB/setup %}


---
除了参数绑定进行SQL注入防止以外:

(1) mysql_real_escape_string -- 转义SQL语句中的特殊字符串，并考虑到连接的当前字符集

使用方法如下:

<code>
$sql = "select count(*) as ctr from users where username
='".mysql_real_escape_string($username)."' <br> and 
password='". mysql_real_escape_string($pw)."' limit 1";
</code>

使用

<code>
mysql_real_escape_string()
</code>

作为用户输入的包装器，就可以避免用户输入中的任何恶意SQL注入

(2) 打开magic_quotes_gpc来防止SQL注入

php.ini中有个设置: magic_quotes_gpc = off
默认是关闭的，如果打开后将自动把用户提交对SQL的查询进行转换
如'转为\', 对于防止SQL注入有很大作用

如果magic_quotes_gbc = off, 可以使用addslashes()函数

